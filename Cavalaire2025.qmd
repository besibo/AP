---
title: "Cavalaire"
subtitle: |
  | Du 19 au 26 avril 2025
  |
  | *√Ä Cavalaire, on se fend la gueule !* --- Baptiste, mercredi 23 avril.
date: now
date-format: "dddd D MMMM YYYY"
lang: fr
title-block-banner: false
language:
  title-block-published: "Derni√®re Mise √† jour"
lightbox: true
---

```{r}
#| include: false
library(tidyverse)
library(janitor)
library(kableExtra)
library(scales)

options(knitr.kable.NA = '')
```


```{r}
#| include: false

# Update this chunk every day

## Dive sites
sites <- c(	"Espingole", "Proph√®te", # Dimanche
            "Togo", "Ramon Membru", # Lundi
			      NA, "Togo", # Mardi
			      "Trafik", "Rubis", # Mercredi
			      NA, NA, # Jeudi
			      NA, NA) # Vendredi

## Who dived where?
plongees <- tibble(
#			           Bap, Beu, Cal, Gro, Nat, Ped, Tho
`Plong√©e 01` = c(  1,   1,   1,   1,   1,   0,   1),
`Plong√©e 02` = c(  1,   1,   1,   1,   1,   1,   1),
`Plong√©e 03` = c(  1,   1,   1,   1,   1,   0,   1),
`Plong√©e 04` = c(  1,   1,   1,   1,   1,   0,   1),
`Plong√©e 05` = c(  0,   0,   0,   0,   0,   0,   0),
`Plong√©e 06` = c(  1,   1,   1,   1,   1,   0,   1),
`Plong√©e 07` = c(  1,   1,   1,   1,   1,   0,   1),
`Plong√©e 08` = c(  1,   1,   1,   1,   1,   0,   1),
`Plong√©e 09` = c(  0,   0,   0,   0,   0,   0,   0),
`Plong√©e 10` = c(  0,   0,   0,   0,   0,   0,   0),
`Plong√©e 11` = c(  0,   0,   0,   0,   0,   0,   0),
`Plong√©e 12` = c(  0,   0,   0,   0,   0,   0,   0)
)

## Who spent what (only for dives and only for members!)
depenses <- tribble(
  ~Qui, ~`Essence bateau`, ~`Essence compresseurs`, ~Port, ~Gaz, ~Divers,
  "bap"  , 170,  0,  0,  0,  0,
  "beu"  , 0,  0,  0,  0,  0,
  "cal"  , 0,  0,  0,  0,  0,
  "grom" , 170,  0,  70.90,  0,  0,  # +69.26 SP 95 non consomm√©, rachet√© par Thomas
  "nat"  , 0,  0,  0,  0,  0,
  "ped"  , 0,  0,  0,  107*2,  144.61, # Cellules
  "tho"  , 0,  0,  0,  0,  50) # R√©paration booster

## Who spent what (one line per diver, members or not, for everything not dive-related)
autres <- tribble(
 ~Qui,  ~Logement, ~Nourriture, ~Carburant, ~Peages, ~Navette, ~Autre,
  "bap" ,  133.33,  0,  73.94+82.8+93.04,  52.1+17.3+7.4,  0,  0,
  "beu" ,  1001.07,  142+7.5,  72.52,  18.5+22.2+22.2+18.5,  0,  0,
  "cal" ,  133.33,  0,  146.04+69.24+42.98,  2.5+2.6+3.9+15.9+34.80,  0,  0,
  "grom",  266.66,  202.16+46.8,  97.11+26.34+46.44,  5.5+7.4+52.10+24.6+17.30,  0,  0,
  "nat" ,  133.33,  8.1+19.25+121.48+44.37+14.60,  0,  3.9+15.90+5+34.8+11.2,  0,  0,
  "ped" ,  266.66,  33.6+28+6+27.53+7.27+43.42+5.2+16.50+26.80+9+2.5+1.9,  55.37+46.19+85.49+85.02,  3.90*2+9.3*2+34.8*2+15.9*2+5*2,  0,  0,
  "tho" ,  266.66,  0,  288,  20.50,  0,  0)
```


```{r}
#| include: false

# Update once for every diving trip

## List of members
membres <- c("Bap", "Beu", "Cal", "Grom", "Nat", "Pedro", "Thomas")
membres.full <- c("Baptiste", "Beno√Æt", "Jean-Claude", "J√©r√¥me", "Nathalie", "Pierre", "Thomas")

## List of guests
invites <- c()
invites.full <- c()

## For each diver, how many people in charge (divers + non-divers included)
famille <- c(1, 1, 1, 2, 1, 2, 1)

## For each diver, how many nights and meals
nuitees <- famille * 7
# repas <- nuitees * 3
repas <- nuitees * 3

## Total number of people including non divers
nb.pers <- sum(famille)

## Diving days
first.day <- "20-04-2025"
last.day <-  "25-04-2025"

## Runtime for the Yamaha
start.hours <- 865.5
end.hours <- 885

## Volume of fuel used
vol.fuel <- 180  
conso.fuel <- 120
dist <- 80 # Nautic miles

## Cost for guest
dive.guest <- 26

## Overhead of diving Cost
overhead <- 3 # ‚Ç¨

source("computations.R")
```


----

## Plongeurs pr√©sents

Membres : `r membres.full`  
Invit√©s : `r invites.full`

## Les plong√©es

```{r}
#| echo: false
#| label: tbl-plongee
#| tbl-cap: "R√©capitulatif des plong√©es effectu√©es"

beautify_table(liste_plongees)
```

Au total, `r liste_plongees |> pull(Total) |> sum()` plong√©es ont √©t√© effectu√©es.

## Les d√©penses "plong√©e"

Les d√©penses entrant dans le calcul du co√ªt des plong√©es sont d√©taill√©s dans le tableau ci-dessous.

```{r}
#| echo: false
#| tbl-cap: "D√©penses engag√©es par les membres de l'AP"
#| label: tbl-dep_plong

beautify_cost_table(depenses)
```

Ici, les d√©penses de la rubrique "divers" concernent le remplacement ddes fus√©es de d√©tresse et l'achat d'un pavillon alpha neuf. Le pavillon est neuf, mais il est minuscule et sera certainement inutilisable...


## Co√ªt des plong√©es


Le co√ªt d'une plong√©e est calcul√© en divisant la somme des d√©penses effectu√©es durant le s√©jour (ici, `r depenses |> pull(Total) |> sum()`‚Ç¨) par le nombre total de plong√©es effectu√©es durant le s√©jour (ici, `r liste_plongees |> pull(Total) |> sum()` plong√©es). Pour cette sortie, le co√ªt d'une plong√©e pour les membres de l'AP est de `r cout_membres - overhead`‚Ç¨. Toutefois, afin d'anticiper sur la r√©vision annuelle du moteur, nous avons d√©cid√© de majorer chaque plong√©e de `r overhead`‚Ç¨. Ainsi, **pour les membres, la plong√©e co√ªte `r cout_membres`‚Ç¨**.

Pour les invit√©s, le prix de la plong√©e est fix√© √† `r cout_guest - overhead`‚Ç¨ si la plong√©e des membres co√ªte moins cher. Sinon, tout le monde paie le m√™me prix. La m√™me majoration de `r overhead`‚Ç¨ est appliqu√©e pour les invit√©s, soit un prix de `r cout_guest`‚Ç¨ par plong√©e.

Au total, pour les plong√©es uniquement, chaque plongeur doit les sommes suivantes √†  l'AP :

```{r}
#| echo: false
#| tbl-cap: "Montants d√ªs pour la plong√©e"
#| label: tbl-cout_plongee

cout_plongee |> 
  select(Plongeur, Cout) |> 
  pivot_wider(names_from = Plongeur, values_from = Cout) |> 
  beautify_cost_table(total = FALSE)
```

## Les d√©penses "hors plong√©e"

Pour cette sortie, les d√©penses n'entrant pas dans le prix des plong√©es et la liste des payeurs sont pr√©sent√©s dans la @tbl-cout_hors_plongee. Pour chaque plongeur (et sa famille), les nombres de nuit√©es et de repas pris au cours du s√©jours sont indiqu√©s dans la @tbl-nights_and_food :

```{r}
#| echo: false
#| tbl-cap: "D√©penses hors plong√©es engag√©es par les participants √†  la sortie"
#| label: tbl-cout_hors_plongee

beautify_cost_table(autres)
```

Ici, les d√©penses de la rubrique "autre" concernent la r√©paration de la crevaison du Ducato la veille du d√©part et les photocopies du macaron pour le stationnement.

```{r}
#| echo: false
#| tbl-cap: "Nombre de nuit√©es et de repas"
#| label: tbl-nights_and_food

beautify_table(nr, total = FALSE)
```

Pour chaque **personne** (plongeur ou non), le co√ªt d'une nuit√©e, d'un repas et du transport s'√©l√®vent √†  :

```{r}
#| echo: false
#| tbl-cap: "Co√ªts unitaires par personne"
#| label: tbl-other_per_person

beautify_cost_table(autres_unit, total = FALSE)
```

## Bilan et remboursement

Au final, chaque **plongeur** doit donc les sommes suivantes

```{r}
#| echo: false
#| tbl-cap: "Bilan des co√ªts par plongeur et par poste"
#| label: tbl-cost_per_diver

beautify_cost_table(cout_all)
```

Compte tenu des sommes d√©j√†  engag√©es, les remboursements √† effectuer sont les suivants :

```{r}
#| echo: false

beautify_cost_table(rembourse, total = FALSE)
```


## B√©n√©fices, essence et heures

La majoration de `r overhead`‚Ç¨ de chaque plong√©e ainsi que les plong√©es des invit√©s (si la plong√©e des membres co√ªte moins de `r dive.guest`‚Ç¨) permettent de faire des (petits) b√©n√©fices. Ils s'√©l√®vent ici √† **`r benef`‚Ç¨**.


Il reste environ 50 bars dans la B50 d'O~2~, et beaucoup de relais sont d√©j√† pr√™ts pour la d√©co des circuits ouverts pour la sortie de cet √©t√©. Tous les 3 litres (diluant et oxy) sont gonfl√©s, sauf le bloc oxy de Pierre, et les 2 diluants trimix de Thomas et Benoit. Il reste aussi un bail-out de trimix √† compl√©ter suite √† une fuite au col du bloc, r√©par√©e chez Thomas 15 jours avant la sortie.

Le moteur a tourn√© `r end.hours-start.hours` heures et `r vol.fuel` litres de sans plomb ont √©t√© mis dans le r√©servoir, en comptant environ 18 litres qui restaient de Camaret et 18 litres qui restaient de Cavalaire √† P√¢ques. D'apr√®s la console, `r conso.fuel` litres ont √©t√© consomm√©s soit une consommation moyenne de `r round(conso.fuel/(end.hours-start.hours),2)` litres √† l'heure. Il devrait donc rester environ `r vol.fuel-conso.fuel` litres dans le r√©servoir. 

<!-- : Thomas en a sorti 20 litres. L'erreur d'estimation de consomation est donc tr√®s faible : 12 litres cumul√©s sur les 3 sorties de l'ann√©e 2024, soit moins de 2%. -->

Pour finir, nous avons parcouru `r dist` milles nautiques. √áa veut dire que nous consommons en moyenne `r round(conso.fuel/dist, 2)` litres par mille, soit `r round(conso.fuel/dist/1.852, 2)` litres au kilom√®tre, soit la bagatelle de `r 100 * round(conso.fuel/dist/1.852, 2)` litres au 100 kilom√®tres. La plong√©e est un sport √©cologique !

<!-- Nous avons commenc√© √† nettoyer les boudins. Il reste la plus grosse part du boulot : le savon sp√©cial est dans la console et le balais brosse dans le Ducato : avis aux amateurs ! -->

<!-- Thomas en a sorti environ 20 litres, soit `r vol.fuel-conso.fuel - 20` litres de moins que pr√©vu. Cela repr√©sente une erreur d'estimation de consommation de `r round((vol.fuel - conso.fuel - 20) * 100 / (vol.fuel), 2)`%.  -->


## Pour m√©moire

Nous √©tions log√©s au [150, all√©e Tr√©mi√®re.](https://maps.app.goo.gl/ARBdEF7RomfWtA4y6) [Description de la location sur Abritel.](https://www.abritel.fr/location-vacances/p1559446?chkin=2025-04-19&chkout=2025-04-26&d1=2025-04-19&d2=2025-04-26&startDate=2025-04-19&endDate=2025-04-26&x_pwa=1&rfrr=HSR&pwa_ts=1731235639382&referrerUrl=aHR0cHM6Ly93d3cuYWJyaXRlbC5mci9Ib3RlbC1TZWFyY2g%3D&useRewards=false&adults=10&regionId=5820&destination=La%20Croix-Valmer%2C%20Var%2C%20France&destType=BOUNDING_BOX&latLong=43.20652%2C6.568811&total_price=0%2C2763&privacyTrackingState=CAN_TRACK&searchId=f731331e-77e3-472e-af7d-8e094b23e8cf&sort=RECOMMENDED&top_dp=2201&top_cur=EUR&userIntent=&selectedRoomType=33393363&selectedRatePlan=0003c5787f7ffc0e421680a75be28e560c9f&expediaPropertyId=33393363). 

<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2909.567215352485!2d6.510897013174119!3d43.17660788300228!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12cece676e4b788d%3A0xe4d8df7233a5d611!2sAll.%20Tr%C3%A9mi%C3%A8re%2C%2083240%20Cavalaire-sur-Mer!5e0!3m2!1sfr!2sfr!4v1731572573722!5m2!1sfr!2sfr" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>

Super maison, proche du port (2,5km), 3 chambres doubles √† l'√©tage principal, une chambre double et une chambre 4 places en bas, au niveau de la piscine chauff√©e tr√®s agr√©able. 2 salles de bain et 2 WC. De la place pour les v√©hicules (mais pas trop pour les remorques, sauf en contrebas √©ventuellement). De la place pour bricoler les recycleurs et pour booster le long de la terrasse, de la place pour stocker du matos, et facile pour gonfler dans la chambre du bas avec le compresseur √©lectrique. Pi√®ce de vie et terrasse agr√©able l'√©tage. Tr√®s pratique √† tous points de vue.

Au titre des p√©rip√©ties, par ordre d√©croissant de gravit√© :

1. Le manom√®tre du booster a explos√©, blessant Pierre au visage et √† l'≈ìil. Personne n'avait pens√© √† v√©rifier si le manom√®tre √©tait oxyg√®ne ou pas, et ni Thomas ni moi n'avons m√™me envisag√© qu'il pouvait ne pas √™tre oxyg√®ne quand nous avons mont√© la lyre cet hiver. Heureusement, plus de peur que de mal. Dix points de suture pour Pierre, et un ≈ìil convalescent...
2. L'avant dernier jour, en route pour le Togo (et avec une journ√©e Donator/Grec pr√©vue le lendemain), perte de puissance instantann√©e du moteur √† 1 mile de la sortie du port. Le moteur ne faisait que de caler, on a tent√© de ramer... Peine perdue ! Au final, remorquage par la SNSM (pour la modique somme de 350‚Ç¨, heureusement pris en charge par l'assurance suite au coup de t√©l√©phone de Thomas √† son pote), puis sortie de l'eau plus t√¥t que pr√©vu. S√©bastien nous a appris que la panne √©tait due au clapet de la poire qui s'est retourn√©, privant les deux pompes √† essence (basse et haute pression) du pr√©cieux carburant. La poire co√ªte 20‚Ç¨. Les pompes √† essence qui font maintenant un bruit anormal, nettement plus : 2457‚Ç¨ sur le devis re√ßu lundi 28 avril üò´üò≠
3. √Ä l'aller, un chevreuil est pass√© sous les roues de la voiture de Thomas (et sous celles de la remorque !) apr√®s avoir rencontr√© son pare-choc. Pas trop de mal en dehors de la calandre, mais une bonne franchise √† payer aupr√®s de l'assurance !
4. Toilettes bouch√©es le dernier jour √† la location ! Appel √† Sonia et au plombier pour r√©gler le probl√®me, finalement r√©solu assez facilement.

Ah oui, et parce que la sortie n'√©tait pas tr√®s ch√®re, 3 d'entre nous ont achet√© une combi Santi chez Gwen...

## Quelques graphiques

```{r}
#| echo: false
#| label: fig-plong
#| fig-cap: "Plongeurs √† bord du Valiant lors de chaque plong√©e"
#| fig-asp: 0.4

pl1
```

```{r}
#| echo: false
#| label: fig-dep
#| fig-cap: "Proportion des d√©penses par poste, pour la plong√©e et le reste"

pl2
```

```{r}
#| echo: false
#| label: fig-all
#| fig-cap: "Proportion des d√©penses de la sortie, tous postes confondus"
#| fig-asp: 0.618

pl3
```


<br>

::: {layout-ncol=4}

![](img/Cavalaire_25_01.jpeg){group="dive"}

![](img/Cavalaire_25_02.jpeg){group="dive"}

![](img/Cavalaire_25_04.jpeg){group="dive"}

![](img/Cavalaire_25_05.jpeg){group="dive"}

![](img/Cavalaire_25_06.jpg){group="dive"}

![](img/Cavalaire_25_07.jpeg){group="dive"}

![](img/Cavalaire_25_08.jpeg){group="dive"}

![](img/Cavalaire_25_09.jpeg){group="dive"}

![](img/Cavalaire_25_10.jpeg){group="dive"}

![](img/Cavalaire_25_11.jpeg){group="dive"}

:::

{{< video img/Cavalaire_25_03.mp4 >}}