---
title: "Camaret"
subtitle: |
  | Du 13 au 20 juillet 2024
  |
  | *Il faut remonter, Marine Nationale !!!* --- Carole, 19 juillet.
date: now
date-format: "dddd D MMMM YYYY"
lang: fr
title-block-banner: false
language:
  title-block-published: "Derni√®re Mise √† jour"
lightbox: true
---

```{r}
#| include: false
library(tidyverse)
library(janitor)
library(kableExtra)
library(scales)

options(knitr.kable.NA = '')
```


```{r}
#| include: false

# Update this chunk every day

## Dive sites
sites <- c(	"Kleber", "Vorpostenboot", # Dimanche
			      "V 724 (ou VMC) et recherche bloc", NA, # Lundi
			      "Kenilworth", "Swansea Vale", # Mardi
			      "Kleber", "Canoni√®re", # Mercredi
			      "Forest Castle", "VMC", # Jeudi
			      "Kenilworth", "Swansea Vale") # vendredi

## Who dived where ?
plongees <- tibble(
#			           Bap, Beu, Cal, Car, Gro, Nat, Ped, Tho, Bea
`Plong√©e 01` = c(  0,   1,   1,   1,   1,   1,   0,   1,   0),
`Plong√©e 02` = c(  1,   1,   1,   1,   1,   1,   1,   1,   0),
`Plong√©e 03` = c(  1,   1,   1,   1,   0,   0,   1,   1,   0),
`Plong√©e 04` = c(  0,   0,   0,   0,   0,   0,   0,   0,   0),
`Plong√©e 05` = c(  1,   1,   1,   1,   1,   1,   1,   1,   0),
`Plong√©e 06` = c(  1,   1,   1,   1,   1,   1,   1,   1,   0),
`Plong√©e 07` = c(  1,   1,   1,   1,   1,   1,   1,   1,   0),
`Plong√©e 08` = c(  1,   1,   1,   1,   1,   1,   1,   1,   0),
`Plong√©e 09` = c(  0,   1,   1,   1,   1,   1,   1,   1,   0),
`Plong√©e 10` = c(  0,   1,   1,   0,   1,   1,   1,   1,   0),
`Plong√©e 11` = c(  0,   1,   1,   1,   1,   1,   1,   1,   0),
`Plong√©e 12` = c(  0,   1,   1,   1,   1,   1,   1,   1,   0)
)

## Who spent what (only for dives and only for members!)
depenses <- tribble(
  ~Qui, ~`Essence bateau`, ~`Essence compresseurs`, ~Port, ~Gaz, ~Divers,
  "bap" , 118.1+65,  0,  0,  0, 0,
  "beu" , 0,  0,  123.90,  0, 0,
  "cal" , 0,  0,  0,  0, 0,
  "car" , 117.62,  0,  0,  0, 0,
  "grom", 60.91+128.19,  36.22,  0,  0, 0,
  "nat" , 0,  0,  0,  0, 0,
  "ped" , 0,  0,  0,  111, 26,  # Remplacement mat√©riel de secours (masques, BAVU...)
  "tho" , 0,  0,  0,  0, 0)

## Who spent what (one line per diver, members or not, for everything not dive-related)
autres <- tribble(
 ~Qui,  ~Logement, ~Nourriture, ~Carburant, ~Peages, ~Navette, ~Autre,
  "bap" ,  0,  0,  108.33+99.32+121.5,  0,  0,  0,
  "beu" ,  273.62,  133.85,  41,  9,  0,  0,
  "cal" ,  159,  0,  102.69,  0,  0,  0,
  "car" ,  159,  5.2,  40.36+45,  17,  0,  0,
  "grom",  159*2,  35+42.15+15.72+6.5,  86.79,  0,  0,  0,
  "nat" ,  159,  349.50+7.99+7.1+25.8+8.49+5.2,  73.85+33.40,  10.6+9.9,  0,  0,
  "Ped" ,  159*2,  40.74+8.1+8+12.56+38+24+5,  0,  0,  0,  0,
  "tho" ,  159,  0,  115.66,  0,  0,  22,   # R√©paration pneu Ducato + photocopies port
  "bea" ,  200,  110.44+77.40,  0,  0,  0,  0)
```


```{r}
#| include: false

# Update once for every diving trip

## List of members
membres <- c("Bap", "Beu", "Calude", "Carole", "Grom", "Nat", "Ped", "Thomas")
membres.full <- c("Baptiste", "Beno√Æt", "Jean-Claude", "Carole", "J√©r√¥me", "Nathalie", "Pierre", "Thomas")

## List of guests
invites <- c("Bea")
invites.full <- c("B√©atrice")

## For each diver, how many people in charge (divers + non-divers included)
famille <- c(1, 1, 1, 1, 2, 1, 2, 1, 1)

## For each diver, how many nights and meals
nuitees <- c(7, 7, 7, 7, 14, 7, 14, 7, 6)
# repas <- nuitees * 3
repas <- c(21, 24, 21, 21, 42, 21, 48, 21, 18)

## Total number of people including non divers
nb.pers <- sum(famille)

## Diving days
first.day <- "14-07-2024"
last.day <-  "19-07-2024"

## Runtime for the Yamaha
start.hours <- 822.0
end.hours <- 840.4

## Volume of fuel used
vol.fuel <- 325
conso.fuel <- 306.8
dist <- 153.6 # Nautic miles

## Cost for guest
dive.guest <- 26

## Overhead of diving Cost
overhead <- 3 # ‚Ç¨

source("computations.R")
```


----

## Plongeurs pr√©sents

Membres : `r membres.full`  
Invit√©s : `r invites.full`

## Les plong√©es

```{r}
#| echo: false
#| label: tbl-plongee
#| tbl-cap: "R√©capitulatif des plong√©es effectu√©es"

beautify_table(liste_plongees)
```

Au total, `r liste_plongees |> pull(Total) |> sum()` plong√©es ont √©t√© effectu√©es.

## Les d√©penses "plong√©e"

Les d√©penses entrant dans le calcul du co√ªt des plong√©es sont d√©taill√©s dans le tableau ci-dessous.

```{r}
#| echo: false
#| tbl-cap: "D√©penses engag√©es par les membres de l'AP"
#| label: tbl-dep_plong

beautify_cost_table(depenses)
```

Ici, les d√©penses de la rubrique "divers" concernent le remplacement d'une partie du mat√©riel d'oxyg√©noth√©rapie (masques, BAVU...).


## Co√ªt des plong√©es


Le co√ªt d'une plong√©e est calcul√© en divisant la somme des d√©penses effectu√©es durant le s√©jour (ici, `r depenses |> pull(Total) |> sum()`‚Ç¨) par le nombre total de plong√©es effectu√©es durant le s√©jour (ici, `r liste_plongees |> pull(Total) |> sum()` plong√©es). Pour cette sortie, le co√ªt d'une plong√©e pour les membres de l'AP est de `r cout_membres - overhead`‚Ç¨. Toutefois, afin d'anticiper sur la r√©vision annuelle du moteur, nous avons d√©cid√© de majorer chaque plong√©e de `r overhead`‚Ç¨. Ainsi, **pour les membres, la plong√©e co√ªte `r cout_membres`‚Ç¨**.

Pour les invit√©s, le prix de la plong√©e est fix√© √† `r cout_guest - overhead`‚Ç¨ si la plong√©e des membres co√ªte moins cher. Sinon, tout le monde paie le m√™me prix. La m√™me majoration de `r overhead`‚Ç¨ est appliqu√©e pour les invit√©s, soit un prix de `r cout_guest`‚Ç¨ par plong√©e.

Au total, pour les plong√©es uniquement, chaque plongeur doit les sommes suivantes √†  l'AP :

```{r}
#| echo: false
#| tbl-cap: "Montants d√ªs pour la plong√©e"
#| label: tbl-cout_plongee

cout_plongee |> 
  select(Plongeur, Cout) |> 
  pivot_wider(names_from = Plongeur, values_from = Cout) |> 
  beautify_cost_table(total = FALSE)
```

## Les d√©penses "hors plong√©e"

Pour cette sortie, les d√©penses n'entrant pas dans le prix des plong√©es et la liste des payeurs sont pr√©sent√©s dans la @tbl-cout_hors_plongee. Pour chaque plongeur (et sa famille), les nombres de nuit√©es et de repas pris au cours du s√©jours sont indiqu√©s dans la @tbl-nights_and_food :

```{r}
#| echo: false
#| tbl-cap: "D√©penses hors plong√©es engag√©es par les participants √†  la sortie"
#| label: tbl-cout_hors_plongee

beautify_cost_table(autres)
```

Ici, les d√©penses de la rubrique "autre" concernent la r√©paration de la crevaison du Ducato la veille du d√©part et les photocopies du macaron pour le stationnement.

```{r}
#| echo: false
#| tbl-cap: "Nombre de nuit√©es et de repas"
#| label: tbl-nights_and_food

beautify_table(nr, total = FALSE)
```

Pour chaque **personne** (plongeur ou non), le co√ªt d'une nuit√©e, d'un repas et du transport s'√©l√®vent √†  :

```{r}
#| echo: false
#| tbl-cap: "Co√ªts unitaires par personne"
#| label: tbl-other_per_person

beautify_cost_table(autres_unit, total = FALSE)
```

## Bilan et remboursement

Au final, chaque **plongeur** doit donc les sommes suivantes

```{r}
#| echo: false
#| tbl-cap: "Bilan des co√ªts par plongeur et par poste"
#| label: tbl-cost_per_diver

beautify_cost_table(cout_all)
```

Compte tenu des sommes d√©j√†  engag√©es, les remboursements √† effectuer sont les suivants :

```{r}
#| echo: false

beautify_cost_table(rembourse, total = FALSE)
```


## B√©n√©fices, essence et heures

La majoration de `r overhead`‚Ç¨ de chaque plong√©e ainsi que les plong√©es des invit√©s (si la plong√©e des membres co√ªte moins de `r dive.guest`‚Ç¨) permettent de faire des (petits) b√©n√©fices. Ils s'√©l√®vent ici √† **`r benef`‚Ç¨**.


Le moteur a tourn√© `r end.hours-start.hours` heures et `r vol.fuel` litres de sans plomb ont √©t√© mis dans le r√©servoir. D'apr√®s la console, `r conso.fuel` litres ont √©t√© consomm√©s soit une consommation moyenne de `r round(conso.fuel/(end.hours-start.hours),2)` litres √† l'heure. Il devrait donc rester environ `r vol.fuel-conso.fuel` litres dans le r√©servoir. 

Pour finir, nous avons parcouru `r dist` milles nautiques. √áa veut dire que nous consommons en moyenne `r round(conso.fuel/dist, 2)` litres par mille, soit `r round(conso.fuel/dist/1.852, 2)` litres au kilom√®tre, soit la bagatelle de `r 100 * round(conso.fuel/dist/1.852, 2)` litres au 100 kilom√®tres. La plong√©e est un sport √©cologique !

Les boudins n'ont toujours pas √©t√© nettoy√©s : le savon sp√©cial est dans la console et le balais brosse dans le Ducato : avis aux amateurs !

<!-- Thomas en a sorti environ 70 litres, soit `r vol.fuel-conso.fuel - 70` litres de moins que pr√©vu. Cela repr√©sente une erreur d'estimation de consommation de `r round((vol.fuel - conso.fuel - 70) * 100 / (vol.fuel), 2)`%.  -->


## Pour m√©moire

Nous avons log√© au [29 Rue du Vallon, 29160 Crozon](https://www.google.fr/maps/place/29+Rue+du+Vallon,+29160+Crozon/@48.2422406,-4.4903547,17z/data=!4m6!3m5!1s0x4816c14558e67321:0xa6cbfd4677f8f404!8m2!3d48.242415!4d-4.4902283!16s%2Fg%2F11cs842dhp?entry=ttu) ([Description de la location sur Booking.com](https://sp.booking.com/hotel/fr/ker-seasea-vue-mer-wifi.fr.html?aid=882988&label=adtechclicktripz-link-dcomparetofr-city-M1416272_pub-3127_campaign-4601_xqdz-7b5d51b969d7f7c70c6f8013c2940ff2_los-01_bw-007_lang-fr_curr-EUR_nrm-01_gstadt-02_gstkid-00_clkid-28cdeb005ec4ad5036e94e2e2fb2f2da&sid=81576bb4ed2502ce40882105f4059b69&checkin=2024-07-13;checkout=2024-07-20;dest_id=-1423109;dest_type=city;dist=0;group_adults=10;group_children=0;hapos=1;hpos=1;no_rooms=1;req_adults=10;req_children=0;room1=A%2CA%2CA%2CA%2CA%2CA%2CA%2CA%2CA%2CA;sb_price_type=total;soh=1;sr_order=popularity;srepoch=1712522013;srpvid=60dc908b0f520501;type=total;ucfs=1&#no_availability_msg). Maison tr√®s agr√©able, garage pratique en haut d'une √©troite all√©e pour entreposer les CCR et le compresseur √©lectrique, grande pi√®ce de vie au RDC, avec salon, salle √† manger, cuisine, buanderie et un WC. Au premier, 3 chambres (2 avec lit double, une avec 2 lits simples), une salle de douche et une salle de bain avec WC, et au deuxi√®me, une chambre sous combles avec 4 lits simples. Voisins conciliants pour garer le camion et la remorque compresseurs, et pas mal de parking gratuit alentour. La maison est √† 15 minutes environ du port de Camaret. Lieu de gonflage √† la sortie de Crozon le soir, et pr√®s de la d√©chetterie de Lanv√©oc le midi. On partait avec la remorque le matin, et on la d√©posait pr√®s de la SNSM √† port Vauban pour pouvoir se garer su Styvel. 

La remorque bateau est rest√©e sur le port derri√®re les b√¢timents de la SNSM, et on a eu une place au port du Styvel (changement en cours de semaine, pour finir au ras de la passerelle d'acc√®s), avec beaucoup moins de portage que du c√¥t√© du port Vauban. Toujours aussi compliqu√© de se garer le midi, mais facile de rincer les CCR sur les pontons le soir. Super semaine au niveau m√©t√©o, √† part le lundi matin marqu√© par la pluie. Peu de vent, mer d'huile ou presque tous les jours sauf le lundi et le mardi (et m√™me ces jours l√†, √ßa n'√©tait pas m√©chant). On a vu des dauphins communs presque √† chaque plong√©e, et plusieurs fois le matin. Un gros thon a √©t√© aper√ßu en surface par quelques uns, impressionnant. C√¥t√© plong√©e, globalement tr√®s belles visi toute la semaine, √©paves poissonneuses mais de plus en plus cass√©es (un peu comme nous, ce qui est triste, mais pas vraiment √©tonnant !). Beaucoup (beaucoup !) de petites langoustes, de homards, de poulpes, de lieus. Et des esp√®ces plus rares (jolie baudroie, Saint Pierre, raies torpilles et brunettes, etc.). Un S80 perdu (bloc de Marc, d√©tendeur de P√©dro üò¢) n'a pas √©t√© retrouv√© le lendemain en d√©pit d'une plong√©e commando hyper organis√©e... Et parce que √ßa faisait longtemps, un sous-marin nucl√©aire qui sortait de la rade nous a oblig√© √† larguer le mouillage sur la derni√®re plong√©e pour remonter plus vite que pr√©vu. Grom a fait le Saint Bernard pour rabattre les plongeurs, mais pour rien au final : quand Pierre et lui sont sortis de l'eau, le sous-marin √©tait d√©j√† loin et il ne nous restait plus qu'√† mouiller √† nouveau pour la plong√©e des amis en circuit ouvert. Baptiste a en revanche perdu 2 jours de plong√©e : la t√™te de son CCR a d√ª partir en r√©vision pour cause de probl√®mes r√©currents (cellules, connecteurs, sol√©no√Øde...). On croise les doigts pour qu'elle soit de retour avant octobre prochain. On a aussi rinc√© tout le matos et la partie "√† l'air" du bateau directement sur le ponton de port Vauban o√π la pression d'eau est bien meilleure qu'au Styvel. Seul le Ducato et quelques blocs vides ont √©t√© rinc√©s √† la location. La coque et le moteur du bateau ont √©t√© rinc√©s chez Thomas le samedi soir.

Au final, excellente semaine au niveau m√©t√©o et plong√©e. √áa fait plaisir d'avoir tout le monde d'un coup sur une sortie. On constate qu'√† nos grands √¢ges on compare plus facilement nos bobos divers et vari√©s que nos exploits sportifs ! La pluie de d√©but de semaine et le jour du d√©part, les f√™tes nautiques et autres feux d'artifices n'ont √©t√© qu'une g√™ne tr√®s minime. En regardant [la pages des √©paves](https://besibo.github.io/AP/Epaves.html), je me dis qu'il y en a encore plein d'autres dans le coin sur lesquelles on n'a jamais plong√©. √áa vaudrait le coup d'y retourner (l'√©t√© prochain ?) pour faire un peu de recherche... 


## Quelques graphiques

```{r}
#| echo: false
#| label: fig-plong
#| fig-cap: "Plongeurs √† bord du Valiant lors de chaque plong√©e"
#| fig-asp: 0.4

pl1
```

```{r}
#| echo: false
#| label: fig-dep
#| fig-cap: "Proportion des d√©penses par poste, pour la plong√©e et le reste"

pl2
```

```{r}
#| echo: false
#| label: fig-all
#| fig-cap: "Proportion des d√©penses de la sortie, tous postes confondus"
#| fig-asp: 0.618

pl3
```


<!-- <br> -->

<!-- ::: {layout-ncol=3} -->

<!-- ![S√©rioles sur le Rubis](img/Serioles.jpg){group="dive"} -->

<!-- ![Rougets sur le Rubis](img/Rougets.jpg){group="dive"} -->

<!-- ![Corb et M√©rou sur le Ramon Membru](img/CorbMerou.jpg){group="dive"} -->
<!-- ::: -->
<!-- *Photos de J√©r√¥me Otruquin, Cavalaire, avril 2024* -->